<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/style.css') }}">
</head>
<body>
    <div class="app-layout">
        <div class="icon-bar">
            <div class="icon-item logo">
                <img src="/static/icons/logo.svg" alt="Logo" class="icon-svg">
                <span class="icon-label">Menu</span>
            </div>
            <div class="icon-item" id="new-session-btn">
                <img src="/static/icons/new-session.svg" alt="New Session" class="icon-svg">
                <span class="icon-label">New Session</span>
            </div>
            <div class="icon-item" id="ask-agent-btn">
                <img src="/static/icons/ask-agent.svg" alt="Ask Agent" class="icon-svg">
                <span class="icon-label">Ask Agent</span>
            </div>
            <div class="icon-item" id="lookup-service-btn">
                <img src="/static/icons/lookup-service.svg" alt="Lookup Service" class="icon-svg">
                <span class="icon-label">Lookup Service</span>
            </div>
            <div class="icon-item" id="search-btn">
                <img src="/static/icons/search.svg" alt="Search" class="icon-svg">
                <span class="icon-label">Search</span>
            </div>
            <div class="icon-item" id="library-btn">
                <img src="/static/icons/library.svg" alt="Library" class="icon-svg">
                <span class="icon-label">Library</span>
            </div>

            <div class="template-list">
                <div class="template-header">Examples</div>
                <div class="template-text">What is the daily maximum value of PI-P0017 for the last two weeks?</div>
                <div class="template-text">How much was produced in the first two weeks of 2025?</div>
                <div class="template-text">Can you plot me data for 18b04353-839d-40a1-84c1-9b547d09dd80 in Febuary?</div>
                <div class="template-text">What is the current pressure in the distillation?</div>
                <div class="template-text">Can you plot me the temperature of the distillation cooler A for the last two weeks?</div>
                <div class="template-text">What is the level in Tank B?</div>
                <div class="template-text">What is the id of TI-T0022?</div>
                <div class="template-text">What assets are next to Asset BA100?</div>
            </div>


            <div class="icon-item" id="theme-toggle-btn" style="margin-top: auto; margin-bottom: 20px;">
                <img src="/static/icons/moon.svg" alt="Dark Mode" class="icon-svg">
                <span class="icon-label">Dark Mode</span>
            </div>
        </div>

        <div class="main-area">
            <div class="container">
                <div class="chat-container">
                    <div id="messages" class="messages"></div>
                </div>

                <!-- Asset Search Section (hidden by default) -->
                <div class="asset-search-main" id="asset-search" style="display: none;">
                    <div class="search-section">
                        <h2>Asset Search</h2>

                        <div class="search-controls-main">
                            <div class="search-row">
                                <input type="text" id="asset-name-search" placeholder="Search by name..." />
                                <select id="asset-type-filter">
                                    <option value="">Assets</option>
                                </select>
                                <select id="type-filter">
                                    <option value="">Types</option>
                                </select>
                                <button id="clear-filters">Clear Filters</button>
                            </div>
                        </div>

                        <div class="asset-results-main" id="asset-results">
                            <div class="results-header-main">
                                <span id="results-count">0 assets</span>
                            </div>
                            <div class="asset-list-main" id="asset-list"></div>
                            <div class="pagination-main" id="pagination">
                                <button id="prev-page" disabled>Previous</button>
                                <span id="page-info">Page 1 of 1</span>
                                <button id="next-page" disabled>Next</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Asset Information Section -->
                <div class="asset-info-main" id="asset-info" style="display: none;">
                    <div class="info-section">
                        <h2>Asset Information</h2>
                        
                        <div class="info-controls">
                            <div class="info-row">
                                <input type="text" id="asset-info-name" placeholder="Enter asset name..." />
                                <button id="get-asset-info">Get Information</button>
                            </div>
                        </div>
                        
                        <div class="asset-details" id="asset-details">
                            <div class="details-placeholder">
                                Enter an asset name to view details
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="input-area">
            <div class="input-container">
                <input type="text" id="question" placeholder="Ask your question..." />
                <button id="send-btn">Send</button>
            </div>

            <div class="bottom-session">
                Session: <span id="session-id-bottom"></span>
            </div>
        </div>
    </div>

    <!-- Add markdown parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>

    <!-- Environment variables -->
    <script>
        window.ENV = {
            AGENT_WS_BASE: "{{ agent_ws_base }}",
            AGENT_URL: "{{ agent_url }}",
            AGENT_BASE: "{{ agent_base }}",
            API_BASE: "{{ api_base }}",
            API_ASSET_URL: "{{ api_asset_url }}",
            API_NEIGHBOR_URL: "{{ api_neighbor_url }}",
            API_NAME_URL: "{{ api_name_url }}",
            API_ID_URL: "{{ api_id_url }}"
        };
    </script>

    <script src="{{ url_for('static', path='/js/chat.js') }}"></script>
</body>
</html>
